{"version":3,"sources":["webpack:///./js/apiService.js","webpack:///./js/modal-handlers.js","webpack:///./js/render-handlers.js","webpack:///./index.js","webpack:///./templates/gallery-items.hbs"],"names":["ImgApiService","this","searchQuery","page","fetchImg","url","BASE_URL","fetch","then","response","json","data","increamentPage","hits","catch","error","alert","resetPage","newQuery","modalRef","document","querySelector","modalImgRef","event","preventDefault","target","nodeName","setAttribute","dataset","source","alt","classList","add","remove","galleryRef","loadMoreButtonRef","renderImg","length","setTimeout","insertAdjacentHTML","galleryTemplate","inputRef","closeButtonRef","overlayRef","imgApiServie","addEventListener","_","debounce","value","innerHTML","query","onSearch","window","scrollTo","top","scrollY","screen","height","behavior","modalHandlers","Handlebars","module","exports","template","container","depth0","helpers","partials","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.f062e7a53231ab58d01c.js","sourcesContent":["import { BASE_URL, API_KEY } from './settings';\n\nexport default class ImgApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchImg() {\n    const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${API_KEY}`;\n\n    return fetch(url)\n      .then(response => response.json())\n      .then(data => {\n        this.increamentPage();\n        return data.hits;\n      }).catch(error => alert(error))\n  }\n\n  increamentPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","const modalRef = document.querySelector('.js-lightbox');\nconst modalImgRef = document.querySelector('.lightbox-image');\n\nfunction openModal(event) {\n  event.preventDefault();\n  if (event.target.nodeName !== 'IMG') {\n    return;\n  }\n  modalImgRef.setAttribute('src', event.target.dataset.source);\n  modalImgRef.setAttribute('alt', event.target.alt);\n\n  modalRef.classList.add('is-open');\n}\n\nfunction closeModal() {\n  modalImgRef.setAttribute('src', '');\n  modalImgRef.setAttribute('alt', '');\n  modalRef.classList.remove('is-open');\n}\n\nexport default { openModal, closeModal };\n","import galleryTemplate from '../templates/gallery-items.hbs';\n\nexport const galleryRef = document.querySelector('.gallery');\nexport const loadMoreButtonRef = document.querySelector('.load-more');\n\nexport function renderImg(hits) {\n  if (hits.length !== 0) {\n    setTimeout(() => {\n      showLoadMoreBtn();\n    }, 500);\n  }\n  galleryRef.insertAdjacentHTML('beforeend', galleryTemplate(hits));\n}\n\nexport function clearImg() {\n  galleryRef.innerHTML = '';\n}\n\nexport function showLoadMoreBtn() {\n  loadMoreButtonRef.classList.remove('is-hidden');\n}\n\nexport function scrollAfterRender() {\n  setTimeout(() => {\n    window.scrollTo({\n      top: window.scrollY + window.screen.height,\n      behavior: 'smooth',\n    });\n  }, 500);\n}\n","import './styles.css';\nimport debounce from 'lodash';\nimport 'material-design-icons/iconfont/material-icons.css';\nimport ImgApiService from './js/apiService';\nimport modalHandlers from './js/modal-handlers';\nimport {\n  galleryRef,\n  loadMoreButtonRef,\n  renderImg,\n  clearImg,\n  scrollAfterRender,\n} from './js/render-handlers';\n\nconst inputRef = document.querySelector('.search-form input');\nconst closeButtonRef = document.querySelector(\n  'button[data-action=\"close-lightbox\"]',\n);\nconst overlayRef = document.querySelector('.lightbox-overlay');\n\n\nconst imgApiServie = new ImgApiService();\n\ninputRef.addEventListener(\n  'input',\n  _.debounce(() => {\n    onSearch();\n  }, 1000),\n);\nloadMoreButtonRef.addEventListener('click', onLoadMore);\ngalleryRef.addEventListener('click', modalHandlers.openModal);\ncloseButtonRef.addEventListener('click', modalHandlers.closeModal);\noverlayRef.addEventListener('click', modalHandlers.closeModal);\n\nfunction onSearch() {\n  if (!inputRef.value) {\n    return;\n  }\n  clearImg();\n  imgApiServie.query = inputRef.value;\n  imgApiServie.resetPage();\n\n  imgApiServie.fetchImg().then(renderImg);\n}\n\nfunction onLoadMore() {\n  imgApiServie.fetchImg().then(renderImg);\n  scrollAfterRender();\n}\n\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery-item\\\">\\n    <div class=\\\"photo-card\\\">\\n        <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":18},\"end\":{\"line\":4,\"column\":34}}}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":49},\"end\":{\"line\":4,\"column\":66}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":73},\"end\":{\"line\":4,\"column\":81}}}) : helper)))\n    + \"\\\" />\\n\\n        <div class=\\\"stats\\\">\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":16},\"end\":{\"line\":9,\"column\":25}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">visibility</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":16},\"end\":{\"line\":13,\"column\":25}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">comment</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":16},\"end\":{\"line\":17,\"column\":28}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":16},\"end\":{\"line\":21,\"column\":29}}}) : helper)))\n    + \"\\n            </p>\\n        </div>\\n    </div>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}